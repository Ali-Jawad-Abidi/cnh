"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[407],{5407:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var s=r(3430),a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://thecnh.co.uk/api"}.CLIENT_ID||"AecaZ1QXpuBdfXLPI0vYNdbo9XKvn2xWRdSvUa3FPd649A7ZnjeD1Sm3TvetXm1nwLSqS3PbSPjw7Fak",l=r(7313),d=r(3960),i=r(4158),n=r(3753),o=r(1927),c=r(1881),x=r.n(c),m=r(9466),h=r(6417);function u(e){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{id:"authentication-modal",tabIndex:"-1",className:"fixed z-40 inset-0 flex items-center justify-center w-full p-4 backdrop-blur overflow-x-hidden md:inset-0 h-[calc(80%-1rem)] md:h-full max-h-[100%]",children:(0,h.jsx)("div",{className:"relative w-full h-full max-w-lg h-auto max-h-[90%]",children:(0,h.jsxs)("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[(0,h.jsx)(m.rU,{to:"/store",children:(0,h.jsxs)("button",{type:"button",className:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-800 dark:hover:text-white","data-modal-hide":"authentication-modal",children:[(0,h.jsx)("svg",{"aria-hidden":"true",className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),(0,h.jsx)("span",{className:"sr-only",children:"Close modal"})]})}),""===e.onError&&(0,h.jsxs)("div",{className:"px-6 py-6 lg:px-8",children:[(0,h.jsx)("h3",{className:"mb-4 text-xl font-medium text-gray-900 dark:text-white",children:"Order Completed!"}),(0,h.jsx)("div",{className:"mt-8 overflow-y-scroll max-h-[50vh] flex flex-col space-y-3 rounded-lg border bg-white px-2 py-4 sm:px-6 dark:bg-gray-900",children:e.cart.length>0&&e.cart.map((function(e){return(0,h.jsxs)("div",{className:"flex flex-row rounded-lg bg-white sm:flex-row dark:bg-gray-900 dark:border-2 dark:border-gray-500",children:[(0,h.jsx)("img",{className:"m-2 h-24 w-28 rounded-md border object-cover object-center",src:e.img,alt:""}),(0,h.jsxs)("div",{className:"flex w-full flex-col px-4 py-4",children:[(0,h.jsx)("span",{className:"float-left font-semibold dark:text-white",children:e.title}),(0,h.jsxs)("span",{className:"float-left text-gray-400 dark:text-white",children:["$",e.price.toFixed(2)-e.discount/100,"x",e.quantity]}),(0,h.jsxs)("p",{className:"text-lg font-bold dark:text-white",children:["$",(e.price.toFixed(2)-e.discount/100)*e.quantity]})]})]})}))}),(0,h.jsxs)("form",{className:"space-y-2",action:"#",children:[(0,h.jsxs)("div",{className:"text-left ml-2",children:[(0,h.jsxs)("span",{className:"text-md mt-2 font-bold dark:text-white",children:["Order Total: $",e.total]}),(0,h.jsx)("div",{className:"text-md mt-2 font-bold dark:text-white",children:"Status: Paid!"}),(0,h.jsxs)("div",{className:"text-md mt-2 font-bold dark:text-white",children:["OrderId: ",e.orderID]})]}),(0,h.jsx)("div",{className:"flex justify-evenly",children:(0,h.jsx)(m.rU,{to:"/store",children:(0,h.jsx)("button",{type:"button",onClick:function(e){onSubmit(e)},className:"w-full ml-1 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Done"})})})]})]}),""!==e.onError&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"text-red-600 text-xl ",children:["Error: ",e.onError]}),(0,h.jsx)(m.rU,{to:"/store",children:(0,h.jsx)("button",{type:"button",onClick:function(e){onSubmit(e)},className:"w-full ml-1 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Done"})})]})]})})})})}function p(e){var t=(0,l.useState)(!1),r=(0,s.Z)(t,2),c=(r[0],r[1]),p=(0,l.useState)(!1),g=(0,s.Z)(p,2),f=g[0],b=g[1],j=(0,l.useState)(""),y=(0,s.Z)(j,2),N=y[0],v=y[1],w=(0,l.useState)(0),k=(0,s.Z)(w,2),S=k[0],_=(k[1],(0,l.useState)(0)),E=(0,s.Z)(_,2),C=E[0],D=E[1],O=(0,l.useState)("cart"in sessionStorage?JSON.parse(sessionStorage.getItem("cart")):[]),I=(0,s.Z)(O,2),Z=I[0],F=I[1];(0,l.useEffect)((function(){var e=0;window.addEventListener("storage",(function(){Z.map((function(t){e+=(t.price.toFixed(2)-t.price*t.discount/100)*t.quantity})),D(e),F("cart"in sessionStorage?JSON.parse(sessionStorage.getItem("cart")):[])})),F("cart"in sessionStorage?JSON.parse(sessionStorage.getItem("cart")):[]),Z.map((function(t){e+=(t.price.toFixed(2)-t.price*t.discount/100)*t.quantity})),D(e)}),[]);return f?(0,h.jsx)(u,{success:f,onError:N,cart:Z,total:C,orderID:S}):Z.length<1?(0,h.jsxs)(d.Z,{className:"dark:bg-gray-900 ",children:[(0,h.jsx)(o.Z,{hideCart:!0}),(0,h.jsx)("div",{className:"grid h-screen sm:px-10 lg:grid-cols-2 lg:px-20 xl:px-32 dark:bg-gray-900 pb-3 pt-3",children:(0,h.jsxs)("div",{className:"px-2 pt-4 ",children:[(0,h.jsxs)("div",{className:"border-2 p-4",children:[(0,h.jsx)("p",{className:"text-left text-xl font-medium dark:text-white",children:"Order Summary"}),(0,h.jsx)("p",{className:"text-left text-gray-400",children:"Your Cart Is Empty"}),(0,h.jsx)("p",{className:"text-left text-gray-400",children:"Go back to Store Page and add items to your cart!"})]}),(0,h.jsx)(m.rU,{to:"/store",children:(0,h.jsx)("button",{className:"bg-blue-600 text-white px-3 py-2 text-sm rounded-lg mt-2 float-right",children:"Go Back To Store"})})]})}),(0,h.jsx)(n.Z,{})]}):(0,h.jsxs)(d.Z,{className:"dark:bg-gray-900",children:[(0,h.jsx)(o.Z,{hideCart:!0}),(0,h.jsxs)("div",{className:"grid sm:px-10 lg:grid-cols-2 lg:px-20 xl:px-32 dark:bg-gray-900 pb-3 pt-3",children:[(0,h.jsxs)("div",{className:"px-4 pt-8",children:[(0,h.jsx)("p",{className:"text-xl font-medium dark:text-white",children:"Order Summary"}),(0,h.jsx)("p",{className:"text-gray-400",children:"Check your items. And select a suitable shipping method."}),(0,h.jsx)("div",{className:"mt-8 space-y-3 rounded-lg border bg-white px-2 py-4 sm:px-6 dark:bg-gray-900",children:Z.length>0&&Z.map((function(e){return(0,h.jsxs)("div",{className:"flex flex-row rounded-lg bg-white sm:flex-row dark:bg-gray-900 dark:border-2 dark:border-gray-500",children:[(0,h.jsx)("img",{className:"m-2 h-24 w-28 rounded-md border object-cover object-center",src:e.img,alt:""}),(0,h.jsxs)("div",{className:"flex w-full flex-col px-4 py-4",children:[(0,h.jsx)("span",{className:"float-left font-semibold dark:text-white",children:e.title}),(0,h.jsxs)("span",{className:"float-left text-gray-400 dark:text-white",children:["$",e.price.toFixed(2)-e.price*e.discount/100,"x",e.quantity]}),(0,h.jsxs)("p",{className:"text-lg font-bold dark:text-white",children:["$",(e.price.toFixed(2)-e.price*e.discount/100)*e.quantity]}),(0,h.jsx)("div",{className:"text-blue-700 ",onClick:function(){!function(e){var t=Z.filter((function(t){return t.id!==e.id}));0===t.length?(F([]),sessionStorage.setItem("cart",JSON.stringify([])),window.dispatchEvent(new Event("storage"))):(F(t),sessionStorage.setItem("cart",JSON.stringify(t)),window.dispatchEvent(new Event("storage")))}(e)},children:"Remove"})]})]})}))}),(0,h.jsx)("p",{className:"mt-8 text-lg font-medium dark:text-white",children:"Shipping Methods"}),(0,h.jsxs)("form",{className:"mt-5 grid gap-6",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("input",{className:"peer hidden",id:"radio_1",type:"radio",name:"radio",checked:!0}),(0,h.jsx)("span",{className:"peer-checked:border-gray-700 absolute right-4 top-1/2 box-content block h-3 w-3 -translate-y-1/2 rounded-full border-8 border-gray-300 bg-white"}),(0,h.jsxs)("label",{className:"peer-checked:border-2 peer-checked:border-gray-700 peer-checked:bg-gray-50 flex cursor-pointer select-none rounded-lg border border-gray-300 p-4",for:"radio_1",children:[(0,h.jsx)("img",{className:"w-14 object-contain",src:"https://cdn.mos.cms.futurecdn.net/SFJxCXKMZihnZsVnn3LoEk.jpg",alt:""}),(0,h.jsxs)("div",{className:"ml-5",children:[(0,h.jsx)("span",{className:"mt-2 font-semibold",children:"Fedex Delivery"}),(0,h.jsx)("p",{className:"text-slate-500 text-sm leading-6",children:"Delivery: 2-4 Days"})]})]})]}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("input",{className:"peer hidden",id:"radio_2",type:"radio",name:"radio",checked:!0}),(0,h.jsx)("span",{className:"peer-checked:border-gray-700 absolute right-4 top-1/2 box-content block h-3 w-3 -translate-y-1/2 rounded-full border-8 border-gray-300 bg-white"}),(0,h.jsxs)("label",{className:"peer-checked:border-2 peer-checked:border-gray-700 peer-checked:bg-gray-50 flex cursor-pointer select-none rounded-lg border border-gray-300 p-4",for:"radio_2",children:[(0,h.jsx)("img",{className:"w-14 object-contain",src:"https://cdn.mos.cms.futurecdn.net/SFJxCXKMZihnZsVnn3LoEk.jpg",alt:""}),(0,h.jsxs)("div",{className:"ml-5",children:[(0,h.jsx)("span",{className:"mt-2 font-semibold",children:"Fedex Delivery"}),(0,h.jsx)("p",{className:"text-slate-500 text-sm leading-6",children:"Delivery: 2-4 Days"})]})]})]})]})]}),(0,h.jsxs)("div",{className:"mt-10 bg-white px-4 pt-8 lg:mt-0 dark:bg-gray-900 dark:border-gray-500 dark:border-2",children:[(0,h.jsx)("p",{className:"text-xl font-medium dark:text-white",children:"Payment Details"}),(0,h.jsx)("p",{className:"text-gray-400",children:"Complete your order by providing your payment details."}),(0,h.jsxs)("div",{className:"mt-8 space-y-3 rounded-lg border bg-white px-2 py-4 sm:px-6 dark:bg-gray-900",children:[(0,h.jsxs)("div",{className:"flex w-full flex-row justify-between",children:[(0,h.jsx)("span",{className:"font-semibold dark:text-white",children:"SubTotal:"}),(0,h.jsx)("span",{className:"float-right text-gray-400 dark:text-white",children:C+"USD "})]}),(0,h.jsxs)("div",{className:"flex w-full flex-row justify-between",children:[(0,h.jsx)("span",{className:"font-semibold dark:text-white",children:"Delivery Costs:"}),(0,h.jsx)("span",{className:"float-right text-gray-400 dark:text-white",children:"100USD "})]}),(0,h.jsxs)("div",{className:"flex w-full flex-row justify-between",children:[(0,h.jsx)("span",{className:"font-semibold dark:text-white",children:"Total:"}),(0,h.jsx)("span",{className:"float-right text-gray-400 dark:text-white",children:C+100+"USD "})]})]}),(0,h.jsxs)("div",{className:"pt-8 z-10 relative ",children:[(0,h.jsx)("div",{className:"text-center text-xl dark:text-white",children:"Payment Methods"}),(0,h.jsx)("div",{className:"text-md dark:text-gray-400 mb-4",children:"Select a payment method from following"}),(0,h.jsx)(i.Vv,{options:{"client-id":a},children:(0,h.jsx)(i.ch,{style:{layout:"vertical",color:"black",label:"checkout"},className:"flex max-w",createOrder:function(e,t){return t.order.create({purchase_units:[{amount:{currency_code:"USD",value:C}}]}).then((function(e){return e})).catch((function(e){return console.log(e)}))},onApprove:function(e,t){return t.order.capture().then((function(e){console.log(e);var t={method:"post",url:"https://thecnh.co.uk/api/neworder",data:{orderid:e.id,cart:Z,user:JSON.parse(sessionStorage.getItem("userid")),username:JSON.parse(sessionStorage.getItem("username")),status:"Paid",date:e.update_time,payer:{name:e.purchase_units[0].shipping.name.full_name,payerid:e.payer.payer_id,email:e.payer.email_address},shipping:e.purchase_units[0].shipping.address,total:C}};x()(t).then((function(e){200===e.status&&(c(!0),b(!0),sessionStorage.setItem("cart",JSON.stringify([])))}))}))},onError:function(e,t){v(e),console.log("data"+e)}})})]})]})]}),(0,h.jsx)(n.Z,{})]})}}}]);